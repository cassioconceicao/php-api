<style type="text/css">

    #search$className {color: $textColor;border-radius: 5px;border: 1px solid $borderColor;background-image: url(data:image/png;base64,$searchIcon);background-position: 5px 5px;background-repeat: no-repeat;width: 85%;font-size: $fontSize;padding: 12px 20px 12px 40px;border: 1px solid $borderColor;margin-bottom: 12px}

    #table$className {color: $textColor;border-collapse: collapse;width: 100%;border: 1px solid $borderColor;font-size: $fontSize;margin-bottom: 12px}
    #table$className thead th, #table$className tbody td {text-align: left;padding: 12px}
    #table$className tbody tr:nth-child(even) {background: $backgroundColor}
    #table$className tbody tr:nth-child(odd) {background: $rowColor}
    #table$className tr {border-bottom: 1px solid $borderColor}
    #table$className thead tr{color: $headTextColor;background-color: $headColor}
    #table$className tbody tr:hover {cursor: pointer;background-color: $highlightColor}

    .pagination$className {display: inline-block;font-size: $fontSize;margin-bottom: 12px}
    .pagination$className a {color: $textColor;float: left;padding: 8px 16px;text-decoration: none;margin: 0 4px;border: 1px solid $borderColor}
    .pagination$className a {border-radius: 5px}
    .pagination$className a.active {border-radius: 5px;background-color: $highlightColor}
    .pagination$className a:hover:not(.active) {background-color: $highlightColor}
    .pagination$className a:first-child {border-top-left-radius: 5px;border-bottom-left-radius: 5px}
    .pagination$className a:last-child {border-top-right-radius: 5px;border-bottom-right-radius: 5px}

</style>
<script type="text/javascript">

    var offset, limit;

    function initPagination$className() {

        offset = 0;
        limit = $paginationMaxResults;

        var ajax = typeof XMLHttpRequest !== 'undefined' ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
        ajax.open('POST', '$url');
        ajax.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        ajax.responseType = 'json';

        ajax.onreadystatechange = function () {

            if (this.readyState === 4 && this.status === 200) {

                if (typeof ajax.response.error !== 'undefined') {
                    alert(ajax.response.error);
                } else {

                    var pages = Math.ceil(ajax.response.total / limit);

                    if (pages > 1) {

                        var div = document.getElementsByClassName("pagination$className");

                        for (var i = 0; i < div.length; i++) {

                            link = document.createElement("a");
                            link.href = "javascript:setPage$className(1)";
                            link.innerHTML = "&laquo";
                            div[i].appendChild(link);

                            for (var j = 1; j < pages + 1; j++) {

                                link = document.createElement("a");
                                link.href = "javascript:setPage$className(" + j + ")";
                                link.innerHTML = j;
                                if (j === 1) {
                                    link.className = "active";
                                }
                                div[i].appendChild(link);
                            }

                            link = document.createElement("a");
                            link.href = "javascript:setPage$className(" + pages + ")";
                            link.innerHTML = "&raquo;";
                            div[i].appendChild(link);
                        }
                    }

                    setPage$className(1);
                }
            }
        };

        ajax.send('action=count');
    }

    function filterTable$className(filter) {
        var rows = document.getElementById("table$className").getElementsByTagName("tbody")[0].getElementsByTagName("tr");
        for (var i = 0; i < rows.length; i++) {
            rows[i].style.display = "none";
            var td = rows[i].getElementsByTagName("td");
            for (var j = 0; j < td.length; j++) {
                var cell = rows[i].getElementsByTagName("td")[j];
                if (cell) {
                    if (cell.innerHTML.toUpperCase().indexOf(filter.toUpperCase()) > -1) {
                        rows[i].style.display = "";
                        break;
                    }
                }
            }
        }
    }

    function setPage$className(page) {

        document.getElementById("spinner").style.display = "";
        document.getElementById("spinner").scrollIntoView();

        offset = page === 1 ? 0 : (page - 1) * limit;

        var ajax = typeof XMLHttpRequest !== 'undefined' ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');
        ajax.open('POST', '$url');
        ajax.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        ajax.responseType = 'json';

        ajax.onreadystatechange = function () {

            if (this.readyState === 4 && this.status === 200) {

                if (typeof ajax.response.error !== 'undefined') {
                    alert(ajax.response.error);
                } else if (ajax.response.length > 0) {

                    var rows = "";
                    for (const op of ajax.response) {
                        rows += "<tr onclick=\"window.location='form.php?id=" + op.value + "'\"><td>" + op.value + "</td><td>" + op.label + "</td></tr>";
                    }

                    document.getElementById("table$className").getElementsByTagName("tbody")[0].innerHTML = rows;

                    var div = document.getElementsByClassName("pagination$className");

                    for (var i = 0; i < div.length; i++) {
                        var href = div[i].getElementsByTagName("a");
                        for (var j = 0; j < href.length; j++) {
                            href[j].className = "";
                            if (j === page) {
                                href[j].className = "active";
                            }
                        }
                    }

                    filterTable$className(document.getElementById("search$className").value);
                    document.getElementById("search$className").focus();
                    document.getElementById("spinner").style.display = "none";
                }
            }
        };

        ajax.send('action=find&offset=' + offset + '&limit=' + limit);
    }
</script>
<input type="text" id="search$className" onkeyup="filterTable$className(this.value)" placeholder="Pesquisar" />
<div class="pagination$className"></div>
<table id="table$className">
    <thead>
        <tr>
            <th style="width:30px">Código</th><th>Descrição</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>
<div class="pagination$className"></div>
<script type="text/javascript">
    initPagination$className();
</script>

