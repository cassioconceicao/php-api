<label for="$name-label">$label</label><br />
<input type="search" class="input" id="$name-label" placeholder="Digite para pesquisar $label" onkeyup="autoComplete(this.id, '$name', '$name-list', '$url')" size="60" />
<input type="hidden" id="$name" name="data[$name]" value="$value" />
<div id="$name-list" class="list"></div>
<script type="text/javascript">

    var descriptor = Object.getOwnPropertyDescriptor(HTMLInputElement.prototype, "value");
    var originalSet = descriptor.set;

    descriptor.set = function (val) {
        if (this.id === "$name" && val > 0) {
            getJSON('$url', 'action=find&id=' + val, function (response) {
                document.getElementById('$name-label').value = response.label;
            });
        }
        originalSet.apply(this, arguments);
    };

    Object.defineProperty(HTMLInputElement.prototype, "value", descriptor);

</script>
